<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Profile | Medical Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="assets/css/doctorDashbord.css">
    <link rel="stylesheet" href="assets/css/style.css">

</head>
<body>


  <div class="dashboard-wrapper">

            <div id="dashbord_box"></div>

      
            <div class="main-content">

            <div id="header_box"></div>

    <div class="container py-5 ">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <div class="doctor_profile-card bg-white">
                    <div class="doctor_profile-header">
                        <div class="mb-4">
                            <img src="" class="doctor_profile-img" alt="Patient Profile Picture" id="doctorprofileImage">
                        </div>
                        <h2><span id="docfirstName"></span> <span id="doclastName"></span></h2>
                        <p class="mb-0">Docotr ID: <span id="id"></span></p>
                    </div>

                  

                    <div class="doctor_profile-info">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h4 class="doctor_section-title">Personal Information</h4>
                            <button class="btn-sm doctor_btn-edit "><i class="fas fa-edit me-2"></i>Edit Profile</button>
                        </div>

                        <div class="row">
                          
                            <div class="col-md-6 doctor_info-group">
                                <div class="info-label">Email Address</div>
                                <div class="info-value" id="email"></div>
                            </div>
                        
                            <div class="col-md-6 doctor_info-group">
                                <div class="info-label">Gender</div>
                                <div class="info-value" id="gender"></div>
                            </div>

                             <div class="col-md-6 doctor_info-group">
                                <div class="info-label"><Address>Address</Address></div>
                                <div class="info-value" id="address"></div>
                            </div>

                              <div class="col-md-6 doctor_info-group">
                                <div class="info-label">Experience Year</div>
                                <div class="info-value" id="experience"></div>
                            </div>
                        
                             <div class="col-md-6 doctor_info-group">
                                <div class="info-label">University Name</div>
                                <div class="info-value" id="university"></div>
                            </div>

                             <div class="col-md-6 doctor_info-group">
                                <div class="info-label">Education Year</div>
                                <div class="info-value" id="education"></div>
                            </div>
                        
                          
                        </div>

                        <h4 class="doctor_section-title mt-5">Account Information</h4>
                        
                        <div class="row">
                            <div class="col-md-6 doctor_info-group">
                                <div class="info-label">Username</div>
                                <div class="info-value" id="username"></div>
                            </div>
                            <div class="col-md-6 doctor_info-group">
                                <div class="info-label">Password</div>
                                <div class="info-value" id="password"></div>
                            </div>
                        </div>

                        <h4 class="doctor_section-title mt-5">Medical Information</h4>
                        <div class="row">

                             <div class="col-md-6 doctor_info-group">
                                <div class="info-label">Specialty</div>
                                <div class="info-value" id="specialty">zokam</div>
                            </div>

                          
                           
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/docotorDashbord.js"></script>


 <script>   


async function loadDoctorProfile() {
    const token = sessionStorage.getItem("token");
    const role = sessionStorage.getItem("role");
    const username = sessionStorage.getItem("username");
    const id = sessionStorage.getItem("id");

    if (!token) {
        window.location.href = "login.html";
        return;
    }

    if (role != 1) {
        document.getElementById("err").innerText = "Access denied!";
        return;
    }

    try {
        const response = await fetch("http://localhost:8080/api/doctors/profile", {
            method: "GET",
            headers: { "Authorization": "Bearer " + token }
        });

        if (!response.ok) throw new Error("Failed to fetch doctor profile");

         
        const data = await response.json();
        console.log("Doctor Profile:", data);

        if (data.profilePicture) {
                    document.getElementById("doctorImage").src =
                        "data:image/png;base64," + data.profilePicture;
                }

          if (data.profilePicture) {
            document.getElementById("doctorprofileImage").src =
                "data:image/png;base64," + data.profilePicture;
        }

        // load the data 

        

        const firstName=document.getElementById("firstName");
        const lastName=document.getElementById("lastName");
        const specialty=document.getElementById("specialty");

        const docfirstName=document.getElementById("docfirstName").innerHTML=data.firstName;
        const doclastName=document.getElementById("doclastName").innerHTML=data.lastName;
        const email=document.getElementById("email").innerHTML=data.email;
        const gender=document.getElementById("gender").innerHTML=data.gender;
        const address=document.getElementById("address").innerHTML=data.address;
        const experience=document.getElementById("experience").innerHTML=data.experienceYear;
        const university=document.getElementById("university").innerHTML=data.universityName;
        const education=document.getElementById("education").innerHTML=data.education;
        const username=document.getElementById("username").innerHTML=data.userName;
        const password=document.getElementById("password").innerHTML=data.password;
        const newid=document.getElementById("id").innerHTML=id;

        firstName.innerText=data.firstName;
        lastName.innerText=data.lastName;
        specialty.innerText=data.specialty;

    } catch (err) {
        console.error("Error:", err.message);
        document.getElementById("err").innerText = err.message;
    }
}

loadDoctorProfile();


</script>


</body>
</html>